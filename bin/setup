#!/bin/bash

cd ~ || exit

files=(.vimrc .tmux.conf .zshrc .zshenv .pryrc ".oh-my-zsh/custom/themes/my.zsh-theme")
mines=( vimrc  tmux.conf  zshrc  zshenv  pryrc  my.zsh-theme)
files_length=${#files[@]}
mines_length=${#mines[@]}

if [ "$files_length" != "$mines_length" ]; then
  printf "\nArrays 'files' and 'mines' do not match in length"
  printf "\nEach 'file' requires a corresponding 'mine' version"
  printf "\n\nCheck the arrays and re-run."
  exit
fi

for ((i = 1; i <= "$files_length"; i++)); do
  echo "Setting up ${files[$i]}..."
  if [ ! -h "${files[$i]}" ]; then
    echo "Not found: ${files[$i]}"
    echo "Creating SYMLINK..."
    ln -s ~/dotfiles/"${mines[$i]}" "${files[$i]}"
    if [ ! -h "${files[$i]}" ]; then
      echo "Failure while trying to create ${files[$i]}"
      exit
    fi
    echo "Success!"
  else
    echo "File found. Symlink not created for ${files[$i]}"
  fi
done

git clone https://github.com/zsh-users/zsh-autosuggestions.git ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions

mkdir -p ~/.rbenv/plugins
git clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build

git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
~/.fzf/install
